# Fly.io configuration for worker service
app = "devsocial-worker"
primary_region = "iad"

[build]

[env]
  NODE_ENV = "production"
  RANK_UPDATE_INTERVAL_MS = "3600000"  # 1 hour

[processes]
  app = "node dist/index.js"

[[services]]
  internal_port = 8080
  processes = ["app"]
  protocol = "tcp"

  [services.concurrency]
    hard_limit = 25
    soft_limit = 20
    type = "connections"
